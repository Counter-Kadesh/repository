(()=>{var e={};e.id=465,e.ids=[465],e.modules={38013:e=>{"use strict";e.exports=require("mongodb")},11185:e=>{"use strict";e.exports=require("mongoose")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},87561:e=>{"use strict";e.exports=require("node:fs")},88849:e=>{"use strict";e.exports=require("node:http")},22286:e=>{"use strict";e.exports=require("node:https")},87503:e=>{"use strict";e.exports=require("node:net")},49411:e=>{"use strict";e.exports=require("node:path")},97742:e=>{"use strict";e.exports=require("node:process")},84492:e=>{"use strict";e.exports=require("node:stream")},72477:e=>{"use strict";e.exports=require("node:stream/web")},41041:e=>{"use strict";e.exports=require("node:url")},47261:e=>{"use strict";e.exports=require("node:util")},65628:e=>{"use strict";e.exports=require("node:zlib")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},71267:e=>{"use strict";e.exports=require("worker_threads")},97617:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>f,originalPathname:()=>u,pages:()=>l,routeModule:()=>p,tree:()=>c}),r(65494),r(35304),r(35866),r(11506);var a=r(23191),n=r(88716),s=r(37922),i=r.n(s),o=r(95231),d={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);r.d(t,d);let c=["",{children:["(root)",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,65494)),"C:\\Users\\kisho\\OneDrive\\Desktop\\evently\\event_platform-main\\app\\(root)\\profile\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,35304)),"C:\\Users\\kisho\\OneDrive\\Desktop\\evently\\event_platform-main\\app\\(root)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,11506)),"C:\\Users\\kisho\\OneDrive\\Desktop\\evently\\event_platform-main\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],l=["C:\\Users\\kisho\\OneDrive\\Desktop\\evently\\event_platform-main\\app\\(root)\\profile\\page.tsx"],u="/(root)/profile/page",f={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(root)/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},91531:(e,t,r)=>{let a={"3fcc73940eb836c0a8fa357a2a60502a69f1c3bc":()=>Promise.resolve().then(r.bind(r,8024)).then(e=>e.getAllEvents),"41be45b2bcfdcc42ad338a85e4d4d97e85e8e3a2":()=>Promise.resolve().then(r.bind(r,8024)).then(e=>e.deleteEvent),"67789ba99783750b55670f4c41d8a10a49acfb5b":()=>Promise.resolve().then(r.bind(r,8024)).then(e=>e.getEventById),a5f50866aa33f214f2d11b7ca5a6607567b9f578:()=>Promise.resolve().then(r.bind(r,8024)).then(e=>e.updateEvent),bd56847814b8582ed592e5a0ad29c2a558330844:()=>Promise.resolve().then(r.bind(r,8024)).then(e=>e.getRelatedEventsByCategory),d5405ec4581fbf83e50fec872e164528047847be:()=>Promise.resolve().then(r.bind(r,8024)).then(e=>e.createEvent),fe19a021a78ed8d2e37a9c2e6c15511a4d46022e:()=>Promise.resolve().then(r.bind(r,8024)).then(e=>e.getEventsByUser),"024ca9de1f326a07e48960df022b961a4eca3a02":()=>Promise.resolve().then(r.bind(r,8662)).then(e=>e.checkoutOrder),"4aefbadefdeb7dba963e48879f4e2f50041f089b":()=>Promise.resolve().then(r.bind(r,8662)).then(e=>e.$$ACTION_1),"4fc5af90ed28e686cd24d361d9b861333a0f5e77":()=>Promise.resolve().then(r.bind(r,8662)).then(e=>e.getOrdersByUser),"81a753d72c712a0140f4e311134a3a389d9db258":()=>Promise.resolve().then(r.bind(r,8662)).then(e=>e.createOrder),fa946fe95bf403099011dc05c05a7a4561931bf2:()=>Promise.resolve().then(r.bind(r,8662)).then(e=>e.getOrdersByEvent),fbec3bd610fc96e4698352d6714badd42f099371:()=>Promise.resolve().then(r.bind(r,8662)).then(e=>e.$$ACTION_0)};async function n(e,...t){return(await a[e]()).apply(null,t)}e.exports={"3fcc73940eb836c0a8fa357a2a60502a69f1c3bc":n.bind(null,"3fcc73940eb836c0a8fa357a2a60502a69f1c3bc"),"41be45b2bcfdcc42ad338a85e4d4d97e85e8e3a2":n.bind(null,"41be45b2bcfdcc42ad338a85e4d4d97e85e8e3a2"),"67789ba99783750b55670f4c41d8a10a49acfb5b":n.bind(null,"67789ba99783750b55670f4c41d8a10a49acfb5b"),a5f50866aa33f214f2d11b7ca5a6607567b9f578:n.bind(null,"a5f50866aa33f214f2d11b7ca5a6607567b9f578"),bd56847814b8582ed592e5a0ad29c2a558330844:n.bind(null,"bd56847814b8582ed592e5a0ad29c2a558330844"),d5405ec4581fbf83e50fec872e164528047847be:n.bind(null,"d5405ec4581fbf83e50fec872e164528047847be"),fe19a021a78ed8d2e37a9c2e6c15511a4d46022e:n.bind(null,"fe19a021a78ed8d2e37a9c2e6c15511a4d46022e"),"024ca9de1f326a07e48960df022b961a4eca3a02":n.bind(null,"024ca9de1f326a07e48960df022b961a4eca3a02"),"4aefbadefdeb7dba963e48879f4e2f50041f089b":n.bind(null,"4aefbadefdeb7dba963e48879f4e2f50041f089b"),"4fc5af90ed28e686cd24d361d9b861333a0f5e77":n.bind(null,"4fc5af90ed28e686cd24d361d9b861333a0f5e77"),"81a753d72c712a0140f4e311134a3a389d9db258":n.bind(null,"81a753d72c712a0140f4e311134a3a389d9db258"),fa946fe95bf403099011dc05c05a7a4561931bf2:n.bind(null,"fa946fe95bf403099011dc05c05a7a4561931bf2"),fbec3bd610fc96e4698352d6714badd42f099371:n.bind(null,"fbec3bd610fc96e4698352d6714badd42f099371")}},14258:(e,t,r)=>{Promise.resolve().then(r.bind(r,94435)),Promise.resolve().then(r.bind(r,48269)),Promise.resolve().then(r.bind(r,66934)),Promise.resolve().then(r.bind(r,16566)),Promise.resolve().then(r.bind(r,70223)),Promise.resolve().then(r.bind(r,7679)),Promise.resolve().then(r.t.bind(r,92481,23)),Promise.resolve().then(r.t.bind(r,79404,23))},46242:(e,t,r)=>{"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return n}});let a=r(15424);function n(e){let{createServerReference:t}=r(56493);return t(e,a.callServer)}},65494:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var a=r(19510),n=r(37888),s=r(2946),i=r(8024),o=r(8662),d=r(12650),c=r(57371);r(71159);let l=async({searchParams:e})=>{let{sessionClaims:t}=(0,d.I8)(),r=t?.userId,l=Number(e?.ordersPage)||1,u=Number(e?.eventsPage)||1,f=await (0,o.getOrdersByUser)({userId:r,page:l}),p=f?.data.map(e=>e.event)||[],b=await (0,i.getEventsByUser)({userId:r,page:u});return(0,a.jsxs)(a.Fragment,{children:[a.jsx("section",{className:"bg-primary-50 bg-dotted-pattern bg-cover bg-center py-5 md:py-10",children:(0,a.jsxs)("div",{className:"wrapper flex items-center justify-center sm:justify-between",children:[a.jsx("h3",{className:"h3-bold text-center sm:text-left",children:"My Tickets"}),a.jsx(s.z,{asChild:!0,size:"lg",className:"button hidden sm:flex",children:a.jsx(c.default,{href:"/#events",children:"Explore More Events"})})]})}),a.jsx("section",{className:"wrapper my-8",children:a.jsx(n.Z,{data:p,emptyTitle:"No event tickets purchased yet",emptyStateSubtext:"No worries - plenty of exciting events to explore!",collectionType:"My_Tickets",limit:3,page:l,urlParamName:"ordersPage",totalPages:f?.totalPages})}),a.jsx("section",{className:"bg-primary-50 bg-dotted-pattern bg-cover bg-center py-5 md:py-10",children:(0,a.jsxs)("div",{className:"wrapper flex items-center justify-center sm:justify-between",children:[a.jsx("h3",{className:"h3-bold text-center sm:text-left",children:"Events Organized"}),a.jsx(s.z,{asChild:!0,size:"lg",className:"button hidden sm:flex",children:a.jsx(c.default,{href:"/events/create",children:"Create New Event"})})]})}),a.jsx("section",{className:"wrapper my-8",children:a.jsx(n.Z,{data:b?.data,emptyTitle:"No events have been created yet",emptyStateSubtext:"Go create some now",collectionType:"Events_Organized",limit:3,page:u,urlParamName:"eventsPage",totalPages:b?.totalPages})})]})}},8662:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$ACTION_0:()=>b,$$ACTION_1:()=>h,checkoutOrder:()=>p,createOrder:()=>m,getOrdersByEvent:()=>v,getOrdersByUser:()=>x});var a=r(24330);r(60166);var n=r(3493),s=r(58585),i=r(50650),o=r(49918),d=r(70676),c=r(19074),l=r(38013),u=r(29258),f=r(40618);let p=(0,a.j)("fbec3bd610fc96e4698352d6714badd42f099371",b);async function b(e){let t=new n.Z(process.env.STRIPE_SECRET_KEY),r=e.isFree?0:100*Number(e.price);try{let a=await t.checkout.sessions.create({line_items:[{price_data:{currency:"usd",unit_amount:r,product_data:{name:e.eventTitle}},quantity:1}],metadata:{eventId:e.eventId,buyerId:e.buyerId},mode:"payment",success_url:"http://localhost:3000/profile",cancel_url:"http://localhost:3000/"});(0,s.redirect)(a.url)}catch(e){throw e}}let m=(0,a.j)("4aefbadefdeb7dba963e48879f4e2f50041f089b",h);async function h(e){try{await (0,o.v)();let t=await d.Z.create({...e,event:e.eventId,buyer:e.buyerId});return JSON.parse(JSON.stringify(t))}catch(e){(0,i.S3)(e)}}async function v({searchString:e,eventId:t}){try{if(await (0,o.v)(),!t)throw Error("Event ID is required");let r=new l.ObjectId(t),a=await d.Z.aggregate([{$lookup:{from:"users",localField:"buyer",foreignField:"_id",as:"buyer"}},{$unwind:"$buyer"},{$lookup:{from:"events",localField:"event",foreignField:"_id",as:"event"}},{$unwind:"$event"},{$project:{_id:1,totalAmount:1,createdAt:1,eventTitle:"$event.title",eventId:"$event._id",buyer:{$concat:["$buyer.firstName"," ","$buyer.lastName"]}}},{$match:{$and:[{eventId:r},{buyer:{$regex:RegExp(e,"i")}}]}}]);return JSON.parse(JSON.stringify(a))}catch(e){(0,i.S3)(e)}}async function x({userId:e,limit:t=3,page:r}){try{await (0,o.v)();let a=(Number(r)-1)*t,n={buyer:e},s=await d.Z.distinct("event._id").find(n).sort({createdAt:"desc"}).skip(a).limit(t).populate({path:"event",model:c.Z,populate:{path:"organizer",model:u.Z,select:"_id firstName lastName"}}),i=await d.Z.distinct("event._id").countDocuments(n);return{data:JSON.parse(JSON.stringify(s)),totalPages:Math.ceil(i/t)}}catch(e){(0,i.S3)(e)}}(0,f.h)([p,m,v,x]),(0,a.j)("024ca9de1f326a07e48960df022b961a4eca3a02",p),(0,a.j)("81a753d72c712a0140f4e311134a3a389d9db258",m),(0,a.j)("fa946fe95bf403099011dc05c05a7a4561931bf2",v),(0,a.j)("4fc5af90ed28e686cd24d361d9b861333a0f5e77",x)},70676:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r(11185);let n=new a.Schema({createdAt:{type:Date,default:Date.now},stripeId:{type:String,required:!0,unique:!0},totalAmount:{type:String},event:{type:a.Schema.Types.ObjectId,ref:"Event"},buyer:{type:a.Schema.Types.ObjectId,ref:"User"}}),s=a.models.Order||(0,a.model)("Order",n)},80440:(e,t,r)=>{"use strict";r.d(t,{$j:()=>A,Dx:()=>$,VY:()=>O,aU:()=>D,aV:()=>N,dk:()=>S,fC:()=>q,h_:()=>j,xz:()=>E});var a=r(45353),n=r(17577),s=r(93095),i=r(48051),o=r(98958),d=r(82561),c=r(34214);let[l,u]=(0,s.b)("AlertDialog",[o.p8]),f=(0,o.p8)(),p=(0,n.forwardRef)((e,t)=>{let{__scopeAlertDialog:r,...s}=e,i=f(r);return(0,n.createElement)(o.xz,(0,a.Z)({},i,s,{ref:t}))}),b=(0,n.forwardRef)((e,t)=>{let{__scopeAlertDialog:r,...s}=e,i=f(r);return(0,n.createElement)(o.aV,(0,a.Z)({},i,s,{ref:t}))}),m="AlertDialogContent",[h,v]=l(m),x=(0,n.forwardRef)((e,t)=>{let{__scopeAlertDialog:r,children:s,...l}=e,u=f(r),p=(0,n.useRef)(null),b=(0,i.e)(t,p),v=(0,n.useRef)(null);return(0,n.createElement)(o.jm,{contentName:m,titleName:g,docsSlug:"alert-dialog"},(0,n.createElement)(h,{scope:r,cancelRef:v},(0,n.createElement)(o.VY,(0,a.Z)({role:"alertdialog"},u,l,{ref:b,onOpenAutoFocus:(0,d.M)(l.onOpenAutoFocus,e=>{var t;e.preventDefault(),null===(t=v.current)||void 0===t||t.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault()}),(0,n.createElement)(c.A4,null,s),!1)))}),g="AlertDialogTitle",y=(0,n.forwardRef)((e,t)=>{let{__scopeAlertDialog:r,...s}=e,i=f(r);return(0,n.createElement)(o.Dx,(0,a.Z)({},i,s,{ref:t}))}),_=(0,n.forwardRef)((e,t)=>{let{__scopeAlertDialog:r,...s}=e,i=f(r);return(0,n.createElement)(o.dk,(0,a.Z)({},i,s,{ref:t}))}),P=(0,n.forwardRef)((e,t)=>{let{__scopeAlertDialog:r,...s}=e,i=f(r);return(0,n.createElement)(o.x8,(0,a.Z)({},i,s,{ref:t}))}),w=(0,n.forwardRef)((e,t)=>{let{__scopeAlertDialog:r,...s}=e,{cancelRef:d}=v("AlertDialogCancel",r),c=f(r),l=(0,i.e)(t,d);return(0,n.createElement)(o.x8,(0,a.Z)({},c,s,{ref:l}))}),q=e=>{let{__scopeAlertDialog:t,...r}=e,s=f(t);return(0,n.createElement)(o.fC,(0,a.Z)({},s,r,{modal:!0}))},E=p,j=e=>{let{__scopeAlertDialog:t,...r}=e,s=f(t);return(0,n.createElement)(o.h_,(0,a.Z)({},s,r))},N=b,O=x,D=P,A=w,$=y,S=_}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,42,650,917,781,362,341,17,708,493,906,646],()=>r(97617));module.exports=a})();