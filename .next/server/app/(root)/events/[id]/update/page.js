(()=>{var e={};e.id=624,e.ids=[624],e.modules={11185:e=>{"use strict";e.exports=require("mongoose")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},28099:e=>{"use strict";e.exports=require("mongoose")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},87561:e=>{"use strict";e.exports=require("node:fs")},88849:e=>{"use strict";e.exports=require("node:http")},22286:e=>{"use strict";e.exports=require("node:https")},87503:e=>{"use strict";e.exports=require("node:net")},49411:e=>{"use strict";e.exports=require("node:path")},97742:e=>{"use strict";e.exports=require("node:process")},84492:e=>{"use strict";e.exports=require("node:stream")},72477:e=>{"use strict";e.exports=require("node:stream/web")},41041:e=>{"use strict";e.exports=require("node:url")},47261:e=>{"use strict";e.exports=require("node:util")},65628:e=>{"use strict";e.exports=require("node:zlib")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},57310:e=>{"use strict";e.exports=require("url")},71267:e=>{"use strict";e.exports=require("worker_threads")},63140:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.a,__next_app__:()=>f,originalPathname:()=>u,pages:()=>l,routeModule:()=>p,tree:()=>c}),r(14423),r(35304),r(35866),r(11506);var a=r(23191),n=r(88716),i=r(37922),s=r.n(i),o=r(95231),d={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);r.d(t,d);let c=["",{children:["(root)",{children:["events",{children:["[id]",{children:["update",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,14423)),"C:\\Users\\kisho\\OneDrive\\Desktop\\evently\\event_platform-main\\app\\(root)\\events\\[id]\\update\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,35304)),"C:\\Users\\kisho\\OneDrive\\Desktop\\evently\\event_platform-main\\app\\(root)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,11506)),"C:\\Users\\kisho\\OneDrive\\Desktop\\evently\\event_platform-main\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],l=["C:\\Users\\kisho\\OneDrive\\Desktop\\evently\\event_platform-main\\app\\(root)\\events\\[id]\\update\\page.tsx"],u="/(root)/events/[id]/update/page",f={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(root)/events/[id]/update/page",pathname:"/events/[id]/update",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},90529:(e,t,r)=>{let a={"1e161ab0f950b4ccbafd95135f03ef8c81be56ce":()=>Promise.resolve().then(r.bind(r,29405)).then(e=>e.getAllCategories),"5ac2db2f97c9d1e782f6ed73733f54d611348332":()=>Promise.resolve().then(r.bind(r,29405)).then(e=>e.$$ACTION_0),"5eaa9faa32fc765e0b9cd92af4b3aa71f3e09970":()=>Promise.resolve().then(r.bind(r,29405)).then(e=>e.$$ACTION_1),"7840df9b1de44360fd7e1695de95c51f39e8e6f8":()=>Promise.resolve().then(r.bind(r,29405)).then(e=>e.createCategory)};async function n(e,...t){return(await a[e]()).apply(null,t)}e.exports={"1e161ab0f950b4ccbafd95135f03ef8c81be56ce":n.bind(null,"1e161ab0f950b4ccbafd95135f03ef8c81be56ce"),"5ac2db2f97c9d1e782f6ed73733f54d611348332":n.bind(null,"5ac2db2f97c9d1e782f6ed73733f54d611348332"),"5eaa9faa32fc765e0b9cd92af4b3aa71f3e09970":n.bind(null,"5eaa9faa32fc765e0b9cd92af4b3aa71f3e09970"),"7840df9b1de44360fd7e1695de95c51f39e8e6f8":n.bind(null,"7840df9b1de44360fd7e1695de95c51f39e8e6f8")}},50782:(e,t,r)=>{let a={"3fcc73940eb836c0a8fa357a2a60502a69f1c3bc":()=>Promise.resolve().then(r.bind(r,8024)).then(e=>e.getAllEvents),"41be45b2bcfdcc42ad338a85e4d4d97e85e8e3a2":()=>Promise.resolve().then(r.bind(r,8024)).then(e=>e.deleteEvent),"67789ba99783750b55670f4c41d8a10a49acfb5b":()=>Promise.resolve().then(r.bind(r,8024)).then(e=>e.getEventById),a5f50866aa33f214f2d11b7ca5a6607567b9f578:()=>Promise.resolve().then(r.bind(r,8024)).then(e=>e.updateEvent),bd56847814b8582ed592e5a0ad29c2a558330844:()=>Promise.resolve().then(r.bind(r,8024)).then(e=>e.getRelatedEventsByCategory),d5405ec4581fbf83e50fec872e164528047847be:()=>Promise.resolve().then(r.bind(r,8024)).then(e=>e.createEvent),fe19a021a78ed8d2e37a9c2e6c15511a4d46022e:()=>Promise.resolve().then(r.bind(r,8024)).then(e=>e.getEventsByUser)};async function n(e,...t){return(await a[e]()).apply(null,t)}e.exports={"3fcc73940eb836c0a8fa357a2a60502a69f1c3bc":n.bind(null,"3fcc73940eb836c0a8fa357a2a60502a69f1c3bc"),"41be45b2bcfdcc42ad338a85e4d4d97e85e8e3a2":n.bind(null,"41be45b2bcfdcc42ad338a85e4d4d97e85e8e3a2"),"67789ba99783750b55670f4c41d8a10a49acfb5b":n.bind(null,"67789ba99783750b55670f4c41d8a10a49acfb5b"),a5f50866aa33f214f2d11b7ca5a6607567b9f578:n.bind(null,"a5f50866aa33f214f2d11b7ca5a6607567b9f578"),bd56847814b8582ed592e5a0ad29c2a558330844:n.bind(null,"bd56847814b8582ed592e5a0ad29c2a558330844"),d5405ec4581fbf83e50fec872e164528047847be:n.bind(null,"d5405ec4581fbf83e50fec872e164528047847be"),fe19a021a78ed8d2e37a9c2e6c15511a4d46022e:n.bind(null,"fe19a021a78ed8d2e37a9c2e6c15511a4d46022e")}},14423:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var a=r(19510),n=r(511),i=r(8024),s=r(12650);let o=async({params:{id:e}})=>{let{sessionClaims:t}=(0,s.I8)(),r=t?.userId,o=await (0,i.getEventById)(e);return(0,a.jsxs)(a.Fragment,{children:[a.jsx("section",{className:"bg-primary-50 bg-dotted-pattern bg-cover bg-center py-5 md:py-10",children:a.jsx("h3",{className:"wrapper h3-bold text-center sm:text-left",children:"Update Event"})}),a.jsx("div",{className:"wrapper my-8",children:a.jsx(n.ZP,{type:"Update",event:o,eventId:o._id,userId:r})})]})}},8024:(e,t,r)=>{"use strict";r.r(t),r.d(t,{createEvent:()=>m,deleteEvent:()=>v,getAllEvents:()=>h,getEventById:()=>y,getEventsByUser:()=>x,getRelatedEventsByCategory:()=>q,updateEvent:()=>g});var a=r(24330);r(60166);var n=r(57708),i=r(49918),s=r(19074),o=r(29258),d=r(11185);let c=new d.Schema({name:{type:String,required:!0,unique:!0}}),l=d.models.Category||(0,d.model)("Category",c);var u=r(50650),f=r(40618);let p=async e=>l.findOne({name:{$regex:e,$options:"i"}}),b=e=>e.populate({path:"organizer",model:o.Z,select:"_id firstName lastName"}).populate({path:"category",model:l,select:"_id name"});async function m({userId:e,event:t,path:r}){try{if(await (0,i.v)(),!await o.Z.findById(e))throw Error("Organizer not found");let a=await s.Z.create({...t,category:t.categoryId,organizer:e});return(0,n.revalidatePath)(r),JSON.parse(JSON.stringify(a))}catch(e){(0,u.S3)(e)}}async function y(e){try{await (0,i.v)();let t=await b(s.Z.findById(e));if(!t)throw Error("Event not found");return JSON.parse(JSON.stringify(t))}catch(e){(0,u.S3)(e)}}async function g({userId:e,event:t,path:r}){try{await (0,i.v)();let a=await s.Z.findById(t._id);if(!a||a.organizer.toHexString()!==e)throw Error("Unauthorized or event not found");let o=await s.Z.findByIdAndUpdate(t._id,{...t,category:t.categoryId},{new:!0});return(0,n.revalidatePath)(r),JSON.parse(JSON.stringify(o))}catch(e){(0,u.S3)(e)}}async function v({eventId:e,path:t}){try{await (0,i.v)(),await s.Z.findByIdAndDelete(e)&&(0,n.revalidatePath)(t)}catch(e){(0,u.S3)(e)}}async function h({query:e,limit:t=6,page:r,category:a}){try{await (0,i.v)();let n=a?await p(a):null,o={$and:[e?{title:{$regex:e,$options:"i"}}:{},n?{category:n._id}:{}]},d=(Number(r)-1)*t,c=s.Z.find(o).sort({createdAt:"desc"}).skip(d).limit(t),l=await b(c),u=await s.Z.countDocuments(o);return{data:JSON.parse(JSON.stringify(l)),totalPages:Math.ceil(u/t)}}catch(e){(0,u.S3)(e)}}async function x({userId:e,limit:t=6,page:r}){try{await (0,i.v)();let a={organizer:e},n=s.Z.find(a).sort({createdAt:"desc"}).skip((r-1)*t).limit(t),o=await b(n),d=await s.Z.countDocuments(a);return{data:JSON.parse(JSON.stringify(o)),totalPages:Math.ceil(d/t)}}catch(e){(0,u.S3)(e)}}async function q({categoryId:e,eventId:t,limit:r=3,page:a=1}){try{await (0,i.v)();let n=(Number(a)-1)*r,o={$and:[{category:e},{_id:{$ne:t}}]},d=s.Z.find(o).sort({createdAt:"desc"}).skip(n).limit(r),c=await b(d),l=await s.Z.countDocuments(o);return{data:JSON.parse(JSON.stringify(c)),totalPages:Math.ceil(l/r)}}catch(e){(0,u.S3)(e)}}(0,f.h)([m,y,g,v,h,x,q]),(0,a.j)("d5405ec4581fbf83e50fec872e164528047847be",m),(0,a.j)("67789ba99783750b55670f4c41d8a10a49acfb5b",y),(0,a.j)("a5f50866aa33f214f2d11b7ca5a6607567b9f578",g),(0,a.j)("41be45b2bcfdcc42ad338a85e4d4d97e85e8e3a2",v),(0,a.j)("3fcc73940eb836c0a8fa357a2a60502a69f1c3bc",h),(0,a.j)("fe19a021a78ed8d2e37a9c2e6c15511a4d46022e",x),(0,a.j)("bd56847814b8582ed592e5a0ad29c2a558330844",q)},49918:(e,t,r)=>{"use strict";r.d(t,{v:()=>o});var a=r(11185),n=r.n(a);let i=process.env.MONGODB_URI,s=global.mongoose||{conn:null,promise:null},o=async()=>{if(s.conn)return s.conn;if(!i)throw Error("MONGODB_URI is missing");return s.promise=s.promise||n().connect(i,{dbName:"evently1",bufferCommands:!1}),s.conn=await s.promise,s.conn}},19074:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var a=r(11185);let n=new a.Schema({title:{type:String,required:!0},description:{type:String},location:{type:String},createdAt:{type:Date,default:Date.now},imageUrl:{type:String,required:!0},startDateTime:{type:Date,default:Date.now},endDateTime:{type:Date,default:Date.now},price:{type:String},isFree:{type:Boolean,default:!1},url:{type:String},category:{type:a.Schema.Types.ObjectId,ref:"Category"},organizer:{type:a.Schema.Types.ObjectId,ref:"User"}}),i=a.models.Event||(0,a.model)("Event",n)},29258:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var a=r(11185);let n=new a.Schema({_id:{type:String},clerkId:{type:String,required:!0,unique:!0},email:{type:String,required:!0,unique:!0},username:{type:String,required:!0,unique:!0},firstName:{type:String,required:!0},lastName:{type:String,required:!0},photo:{type:String,required:!0}}),i=a.models.User||(0,a.model)("User",n)}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,42,650,917,781,362,341,17,708,361,369,772,906,253],()=>r(63140));module.exports=a})();